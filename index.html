<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Meta tags will be dynamically updated by JS -->
    <title>VinoElite - Exclusive Wines From Around The World</title>
    <meta name="description" content="Discover a curated selection of exclusive wines from renowned wineries across the globe. Red, white, sparkling - find your perfect bottle at VinoElite.">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* --- GLOBAL STYLES (FROM YOUR ORIGINAL DESIGN) --- */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        :root {
            --primary-color: #c19a6b;
            --primary-dark: #a67c52;
            --primary-light: #e8c8a0;
            --bg-dark: #1a1a1a;
            --bg-darker: #0f0f0f;
            --bg-light: #2d1b1b;
            --text-light: #f5f5f5;
            --text-muted: #b0b0b0;
            --border-color: rgba(255, 255, 255, 0.1);
            --success-color: #28a745;
            --danger-color: #dc3545;
        }
        
        body {
            background: linear-gradient(135deg, var(--bg-dark) 0%, var(--bg-light) 100%);
            color: var(--text-light);
            line-height: 1.6;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        button, .btn {
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        /* --- MAIN SITE STYLES --- */
        #main-site-content header {
            background: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(10px);
            padding: 15px 0;
            position: sticky;
            top: 0;
            z-index: 100;
            border-bottom: 1px solid var(--border-color);
        }
        
        .header-content { display: flex; justify-content: space-between; align-items: center; }
        .logo { font-size: 1.8rem; font-weight: 300; letter-spacing: 2px; color: var(--primary-light); text-decoration: none; }
        .logo span { font-weight: 600; }
        .nav-links { display: flex; gap: 30px; }
        .nav-links a { color: var(--text-light); text-decoration: none; font-size: 0.9rem; letter-spacing: 1px; transition: color 0.3s ease; }
        .nav-links a:hover { color: var(--primary-light); }
        .header-actions { display: flex; gap: 20px; }
        .header-actions button { background: none; border: none; color: var(--text-light); font-size: 1.2rem; }
        .header-actions button:hover { color: var(--primary-light); }
        
        /* MODIFIED: Hero section height is now 100vh */
        .hero { height: 100vh; display: flex; align-items: center; position: relative; overflow: hidden; }
        .hero-bg { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background-size: cover; background-position: center; z-index: -1; }
        .hero-content { max-width: 600px; }
        .hero-subtitle { font-size: 1rem; color: var(--primary-light); text-transform: uppercase; letter-spacing: 2px; margin-bottom: 10px; }
        .hero-title { font-size: 3.5rem; font-weight: 300; line-height: 1.2; margin-bottom: 20px; letter-spacing: 1px; }
        .hero-description { font-size: 1.1rem; margin-bottom: 30px; color: var(--text-muted); }
        
        .btn-primary { background: linear-gradient(135deg, var(--primary-color) 0%, var(--primary-dark) 100%); color: var(--bg-dark); border: none; padding: 15px 30px; border-radius: 30px; font-size: 1rem; font-weight: 600; letter-spacing: 1px; display: inline-flex; align-items: center; gap: 10px; text-decoration: none; }
        .btn-primary:hover { background: linear-gradient(135deg, var(--primary-light) 0%, var(--primary-color) 100%); transform: translateY(-2px); box-shadow: 0 5px 15px rgba(193, 154, 107, 0.4); }
        
        .section { padding: 80px 0; }
        .section-header { text-align: center; margin-bottom: 50px; }
        .section-subtitle { font-size: 1rem; color: var(--primary-color); text-transform: uppercase; letter-spacing: 2px; margin-bottom: 10px; }
        .section-title { font-size: 2.5rem; font-weight: 300; color: var(--primary-light); letter-spacing: 1px; }
        
        .categories-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 30px; }
        
        /* MODIFIED: Category card styles now match product card styles */
        .category-card {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            overflow: hidden;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            border: 1px solid var(--border-color);
            text-decoration: none;
            color: var(--text-light);
        }
        .category-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.3);
        }
        .category-image {
            height: 300px;
            position: relative;
            overflow: hidden;
            background: linear-gradient(to bottom, var(--bg-light), var(--bg-dark));
        }
        .category-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.5s ease;
        }
        .category-card:hover .category-image img {
            transform: scale(1.05);
        }
        .category-info {
            padding: 20px;
        }
        .category-name {
            font-size: 1.3rem;
            margin-bottom: 10px;
            font-weight: 400;
            letter-spacing: 0.5px;
        }
        .category-count {
            font-size: 0.9rem;
            color: var(--text-muted);
        }
        
        .products-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 30px; }
        .product-card { background: rgba(255, 255, 255, 0.05); backdrop-filter: blur(10px); border-radius: 15px; overflow: hidden; transition: transform 0.3s ease, box-shadow 0.3s ease; border: 1px solid var(--border-color); }
        .product-card:hover { transform: translateY(-10px); box-shadow: 0 15px 30px rgba(0, 0, 0, 0.3); }
        .product-image { height: 300px; position: relative; overflow: hidden; background: linear-gradient(to bottom, var(--bg-light), var(--bg-dark)); }
        .product-image img { width: 100%; height: 100%; object-fit: cover; transition: transform 0.5s ease; }
        .product-card:hover .product-image img { transform: scale(1.05); }
        .product-badge { position: absolute; top: 15px; right: 15px; background: var(--primary-color); color: var(--bg-dark); padding: 5px 12px; border-radius: 20px; font-size: 0.8rem; font-weight: 600; letter-spacing: 1px; }
        .product-info { padding: 20px; }
        /* MODIFIED: Renamed .product-region to .product-subtitle for clarity */
        .product-subtitle { font-size: 0.8rem; color: var(--primary-color); text-transform: uppercase; letter-spacing: 1px; margin-bottom: 5px; }
        .product-name { font-size: 1.3rem; margin-bottom: 10px; font-weight: 400; letter-spacing: 0.5px; }
        .product-description { font-size: 0.9rem; line-height: 1.5; margin-bottom: 20px; color: var(--text-muted); height: 60px; overflow: hidden; }
        .product-price { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; }
        .price { font-size: 1.5rem; font-weight: 300; color: var(--primary-light); }
        .old-price { font-size: 1rem; text-decoration: line-through; color: var(--text-muted); }
        .view-details-btn { text-decoration: none; background: linear-gradient(135deg, var(--primary-color) 0%, var(--primary-dark) 100%); color: var(--bg-dark); border: none; padding: 12px 20px; border-radius: 30px; font-size: 0.9rem; font-weight: 600; letter-spacing: 1px; display: flex; align-items: center; justify-content: center; gap: 8px; width: 100%; }
        .view-details-btn:hover { background: linear-gradient(135deg, var(--primary-light) 0%, var(--primary-color) 100%); transform: translateY(-2px); box-shadow: 0 5px 15px rgba(193, 154, 107, 0.4); }
        
        footer { background: var(--bg-darker); padding: 60px 0 30px; border-top: 1px solid var(--border-color); }
        .footer-content { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 40px; margin-bottom: 40px; }
        .footer-column h3 { font-size: 1.2rem; margin-bottom: 20px; font-weight: 400; color: var(--primary-light); }
        .footer-links { list-style: none; }
        .footer-links li { margin-bottom: 10px; }
        .footer-links a { color: var(--text-muted); text-decoration: none; transition: color 0.3s ease; }
        .footer-links a:hover { color: var(--primary-light); }
        .social-links { display: flex; gap: 15px; margin-top: 20px; }
        .social-links a { display: flex; align-items: center; justify-content: center; width: 40px; height: 40px; background: rgba(255, 255, 255, 0.1); border-radius: 50%; color: var(--text-light); text-decoration: none; transition: all 0.3s ease; }
        .social-links a:hover { background: var(--primary-color); color: var(--bg-dark); transform: translateY(-3px); }
        .footer-bottom { text-align: center; padding-top: 30px; border-top: 1px solid var(--border-color); color: var(--text-muted); font-size: 0.9rem; }
        
        .mobile-menu-btn { display: none; background: none; border: none; color: var(--text-light); font-size: 1.5rem; z-index: 1001; }
        
        /* --- ADMIN PANEL STYLES --- */
        #admin-panel {
            padding: 40px 0;
            display: none; /* Hidden by default */
        }
        .admin-container {
            display: flex;
            gap: 30px;
            align-items: flex-start;
        }
        .admin-sidebar {
            width: 250px;
            flex-shrink: 0;
            background: rgba(255, 255, 255, 0.05);
            padding: 20px;
            border-radius: 15px;
            border: 1px solid var(--border-color);
        }
        .admin-sidebar h2 {
            font-size: 1.5rem;
            color: var(--primary-light);
            margin-bottom: 20px;
            text-align: center;
        }
        .admin-menu {
            list-style: none;
        }
        .admin-menu li a {
            display: block;
            padding: 12px 15px;
            color: var(--text-light);
            text-decoration: none;
            border-radius: 8px;
            margin-bottom: 5px;
            transition: background 0.3s ease;
        }
        .admin-menu li a:hover, .admin-menu li a.active {
            background: var(--primary-color);
            color: var(--bg-dark);
        }
        .admin-main-content {
            flex-grow: 1;
        }
        .admin-view {
            display: none; /* All views hidden by default */
            background: rgba(255, 255, 255, 0.05);
            padding: 30px;
            border-radius: 15px;
            border: 1px solid var(--border-color);
        }
        .admin-view.active {
            display: block;
        }
        .admin-view h3 {
            font-size: 2rem;
            font-weight: 300;
            color: var(--primary-light);
            margin-bottom: 25px;
            border-bottom: 1px solid var(--border-color);
            padding-bottom: 15px;
        }
        .admin-view h4 {
            font-size: 1.5rem;
            font-weight: 400;
            color: var(--primary-light);
            margin-top: 30px;
            margin-bottom: 20px;
        }
        .form-group {
            margin-bottom: 20px;
        }
        .form-group label {
            display: block;
            margin-bottom: 8px;
            color: var(--text-muted);
        }
        .form-group input, .form-group textarea, .form-group select {
            width: 100%;
            background: rgba(0, 0, 0, 0.2);
            border: 1px solid var(--border-color);
            color: var(--text-light);
            padding: 12px;
            border-radius: 8px;
            font-size: 1rem;
        }
        .form-group textarea {
            min-height: 120px;
            resize: vertical;
        }
        .form-group small {
            display: block;
            margin-top: 5px;
            color: var(--text-muted);
            font-size: 0.8rem;
        }
        .btn-save {
            background: var(--success-color);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
        }
        .btn-add-new {
            background: var(--primary-color);
            color: var(--bg-dark);
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            font-size: 0.9rem;
            font-weight: 600;
            margin-bottom: 20px;
        }
        .admin-table {
            width: 100%;
            border-collapse: collapse;
        }
        .admin-table th, .admin-table td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid var(--border-color);
        }
        .admin-table th {
            color: var(--primary-light);
        }
        .admin-table img {
            width: 50px;
            height: 50px;
            object-fit: cover;
            border-radius: 5px;
        }
        .actions-cell button {
            background: none;
            border: none;
            font-size: 1rem;
            margin-right: 10px;
        }
        .btn-edit { color: var(--primary-light); }
        .btn-archive { color: #ffc107; }
        .btn-delete { color: var(--danger-color); }
        .btn-restore { color: var(--success-color); }
        .archived-item {
            opacity: 0.5;
            text-decoration: line-through;
        }

        /* --- RESPONSIVE STYLES --- */
        @media (max-width: 992px) {
            .admin-container {
                flex-direction: column;
            }
            .admin-sidebar {
                width: 100%;
                margin-bottom: 30px;
            }
        }
        @media (max-width: 768px) {
            .header-actions { display: none; }
            .mobile-menu-btn { display: block; }
            .nav-links {
                display: none;
                flex-direction: column;
                position: absolute;
                top: 75px; /* Высота хедера */
                left: 0;
                width: 100%;
                background: rgba(0, 0, 0, 0.95);
                backdrop-filter: blur(10px);
                padding: 20px;
                border-bottom: 1px solid var(--border-color);
            }
            .nav-links.active {
                display: flex;
            }
            .hero-title { font-size: 2.5rem; }
            .section-title { font-size: 2.2rem; }
            .admin-menu {
                display: flex;
                flex-wrap: wrap;
                gap: 10px;
            }
            .admin-menu li {
                flex-grow: 1;
            }
            .admin-menu li a {
                text-align: center;
            }
        }
        @media (max-width: 480px) {
            .products-grid, .categories-grid { grid-template-columns: 1fr; }
            .admin-table {
                display: block;
                width: 100%;
            }
            .admin-table thead, .admin-table tbody, .admin-table tr, .admin-table th, .admin-table td {
                display: block;
            }
            .admin-table thead {
                display: none;
            }
            .admin-table tr {
                border: 1px solid var(--border-color);
                border-radius: 10px;
                margin-bottom: 15px;
            }
            .admin-table td {
                border: none;
                border-bottom: 1px solid var(--border-color);
                position: relative;
                padding-left: 50%;
            }
            .admin-table td:before {
                position: absolute;
                left: 10px;
                width: 45%;
                padding-right: 10px;
                white-space: nowrap;
                content: attr(data-label);
                font-weight: bold;
                color: var(--primary-light);
            }
            .admin-table td:last-child {
                border-bottom: none;
            }
        }
    </style>
</head>
<body>

    <!-- =============================================================== -->
    <!-- =================== MAIN WEBSITE CONTENT ====================== -->
    <!-- =============================================================== -->
    <div id="main-site-content">
        <!-- Header -->
        <header>
            <div class="container">
                <div class="header-content">
                    <a href="/index.html" class="logo">Vino<span>Elite</span></a>
                    <nav class="nav-links" id="main-nav">
                        <a href="/catalog.html">Catalog</a>
                        <a href="#">Collections</a>
                        <a href="#">Wineries</a>
                        <a href="#">About Us</a>
                    </nav>
                    <div class="header-actions">
                        <button><i class="fas fa-search"></i></button>
                        <button><i class="far fa-user"></i></button>
                        <button><i class="fas fa-shopping-cart"></i></button>
                    </div>
                    <button class="mobile-menu-btn"><i class="fas fa-bars"></i></button>
                </div>
            </div>
        </header>

        <!-- Hero Section -->
        <section class="hero" id="hero-section">
            <div class="hero-bg"></div>
            <div class="container">
                <div class="hero-content">
                    <h1 class="hero-title">Loading content...</h1>
                    <div class="hero-subtitle">Loading...</div>
                    <p class="hero-description"></p>
                    <a href="/catalog.html" class="btn-primary">
                        <i class="fas fa-wine-bottle"></i> Explore Collection
                    </a>
                </div>
            </div>
        </section>

        <!-- Categories Section -->
        <section class="section" id="categories-section">
            <div class="container">
                <div class="section-header">
                    <div class="section-subtitle">Categories</div>
                    <h2 class="section-title">Discover the Variety</h2>
                </div>
                <div class="categories-grid">
                    <!-- Categories will be dynamically inserted here by JavaScript -->
                </div>
            </div>
        </section>

        <!-- Featured Products -->
        <section class="section" id="products-section">
            <div class="container">
                <div class="section-header">
                    <div class="section-subtitle">Exclusive</div>
                    <h2 class="section-title">Featured Wines</h2>
                </div>
                <div class="products-grid">
                    <!-- Products will be dynamically inserted here by JavaScript -->
                </div>
            </div>
        </section>

        <!-- Footer -->
        <footer id="footer">
            <div class="container">
                <div class="footer-content">
                    <div class="footer-column">
                        <h3>VinoElite</h3>
                        <ul class="footer-links">
                            <li><a href="#">About Us</a></li>
                            <li><a href="#">Contact</a></li>
                            <li><a href="#">Shipping & Payment</a></li>
                            <li><a href="#">Returns</a></li>
                        </ul>
                    </div>
                    <div class="footer-column">
                        <h3>Catalog</h3>
                        <ul class="footer-links">
                            <li><a href="#">Red Wines</a></li>
                            <li><a href="#">White Wines</a></li>
                            <li><a href="#">Sparkling Wines</a></li>
                            <li><a href="#">Spirits</a></li>
                        </ul>
                    </div>
                    <div class="footer-column">
                        <h3>Help</h3>
                        <ul class="footer-links">
                            <li><a href="#">FAQ</a></li>
                            <li><a href="#">Terms of Use</a></li>
                            <li><a href="#">Privacy Policy</a></li>
                            <li><a href="#">Sitemap</a></li>
                        </ul>
                    </div>
                    <div class="footer-column">
                        <h3>Contacts</h3>
                        <ul class="footer-links">
                            <li><i class="fas fa-phone"></i> +7 (495) 123-45-67</li>
                            <li><i class="fas fa-envelope"></i> info@vinoelite.com</li>
                            <li><i class="fas fa-map-marker-alt"></i> Moscow, Vinaya St, 15</li>
                        </ul>
                        <div class="social-links">
                            <a href="#"><i class="fab fa-instagram"></i></a>
                            <a href="#"><i class="fab fa-facebook-f"></i></a>
                            <a href="#"><i class="fab fa-telegram"></i></a>
                            <a href="#"><i class="fab fa-whatsapp"></i></a>
                        </div>
                    </div>
                </div>
                <div class="footer-bottom">
                    <p>&copy; 2023 VinoElite. All rights reserved.</p>
                </div>
            </div>
        </footer>
    </div>

    <!-- =============================================================== -->
    <!-- ======================= ADMIN PANEL =========================== -->
    <!-- =============================================================== -->
    <div id="admin-panel" class="container">
        <div class="admin-container">
            <!-- Admin Sidebar -->
            <aside class="admin-sidebar">
                <h2>Admin Panel</h2>
                <ul class="admin-menu">
                    <li><a href="#" data-view="dashboard" class="active"><i class="fas fa-tachometer-alt"></i> Dashboard</a></li>
                    <li><a href="#" data-view="hero"><i class="fas fa-image"></i> Hero Section</a></li>
                    <li><a href="#" data-view="categories"><i class="fas fa-tags"></i> Categories</a></li>
                    <li><a href="#" data-view="products"><i class="fas fa-wine-bottle"></i> Products</a></li>
                    <li><a href="#" id="exit-admin-mode"><i class="fas fa-sign-out-alt"></i> Exit Admin Mode</a></li>
                </ul>
            </aside>

            <!-- Admin Main Content -->
            <main class="admin-main-content">
                <!-- Dashboard View -->
                <div id="admin-view-dashboard" class="admin-view active">
                    <h3>Welcome, Administrator!</h3>
                    <p>Select a section from the menu to start managing your website content.</p>
                    <p>All changes you make here will be instantly reflected on the main site.</p>
                </div>

                <!-- Hero Section View -->
                <div id="admin-view-hero" class="admin-view">
                    <h3>Edit Hero Section</h3>
                    <form id="hero-form">
                        <div class="form-group">
                            <label for="hero-subtitle">Subtitle</label>
                            <input type="text" id="hero-subtitle" name="heroSubtitle">
                        </div>
                        <div class="form-group">
                            <label for="hero-title">Title</label>
                            <input type="text" id="hero-title" name="heroTitle">
                        </div>
                        <div class="form-group">
                            <label for="hero-description">Description</label>
                            <textarea id="hero-description" name="heroDescription"></textarea>
                        </div>
                        <div class="form-group">
                            <label for="hero-bg-image">Background Image URL</label>
                            <input type="text" id="hero-bg-image" name="heroBgImage">
                        </div>
                        <h4>SEO Settings for Main Page</h4>
                        <div class="form-group">
                            <label for="hero-meta-title">Meta Title</label>
                            <input type="text" id="hero-meta-title" name="metaTitle">
                        </div>
                        <div class="form-group">
                            <label for="hero-meta-description">Meta Description</label>
                            <textarea id="hero-meta-description" name="metaDescription"></textarea>
                        </div>
                        <button type="submit" class="btn-save">Save Changes</button>
                    </form>
                </div>

                <!-- Categories View -->
                <div id="admin-view-categories" class="admin-view">
                    <h3>Manage Categories</h3>
                    <button id="btn-add-category" class="btn-add-new"><i class="fas fa-plus"></i> Add New Category</button>
                    <div id="category-form-container" style="display: none;">
                        <form id="category-form">
                            <input type="hidden" id="category-id" name="id">
                            <div class="form-group">
                                <label for="category-name">Category Name</label>
                                <input type="text" id="category-name" name="name" required>
                            </div>
                            <div class="form-group">
                                <label for="category-slug">URL Slug</label>
                                <input type="text" id="category-slug" name="slug" required>
                                <small>e.g., "Red Wine" -> "red-wine". Use lowercase letters, numbers, and hyphens.</small>
                            </div>
                            <div class="form-group">
                                <label for="category-image">Image URL</label>
                                <input type="text" id="category-image" name="imageUrl" required>
                            </div>
                             <div class="form-group">
                                <label for="category-product-count">Product Count</label>
                                <input type="number" id="category-product-count" name="productCount" required>
                            </div>
                            <button type="submit" class="btn-save">Save Category</button>
                        </form>
                        <hr style="margin: 20px 0; border-color: var(--border-color);">
                    </div>
                    <table class="admin-table">
                        <thead>
                            <tr>
                                <th>Image</th>
                                <th>Name</th>
                                <th>Slug</th>
                                <th>Status</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="categories-table-body">
                            <!-- Category rows will be inserted here -->
                        </tbody>
                    </table>
                </div>

                <!-- Products View -->
                <div id="admin-view-products" class="admin-view">
                    <h3>Manage Products</h3>
                    <button id="btn-add-product" class="btn-add-new"><i class="fas fa-plus"></i> Add New Product</button>
                    <div id="product-form-container" style="display: none;">
                        <form id="product-form">
                            <input type="hidden" id="product-id" name="id">
                            
                            <h4>Main Information</h4>
                            <div class="form-group">
                                <label for="product-name">Product Name</label>
                                <input type="text" id="product-name" name="name" required>
                            </div>
                            <div class="form-group">
                                <label for="product-slug">URL Slug</label>
                                <input type="text" id="product-slug" name="slug" required>
                                <small>e.g., "chateau-margaux-2015". Use lowercase letters, numbers, and hyphens.</small>
                            </div>
                            <div class="form-group">
                                <label for="product-country">Country</label>
                                <input type="text" id="product-country" name="country" required>
                            </div>
                            <div class="form-group">
                                <label for="product-region">Region</label>
                                <input type="text" id="product-region" name="region" required>
                            </div>
                            <div class="form-group">
                                <label for="product-appellation">Appellation</label>
                                <input type="text" id="product-appellation" name="appellation">
                            </div>
                            <div class="form-group">
                                <label for="product-year">Year</label>
                                <input type="number" id="product-year" name="year" placeholder="e.g., 2015">
                            </div>
                            <div class="form-group">
                                <label for="product-grape-varieties">Grape Varieties</label>
                                <input type="text" id="product-grape-varieties" name="grapeVarieties" placeholder="e.g., Cabernet Sauvignon, Merlot">
                            </div>
                            <div class="form-group">
                                <label for="product-sweetness">Sweetness</label>
                                <select id="product-sweetness" name="sweetness">
                                    <option value="Dry">Dry</option>
                                    <option value="Semi-Dry">Semi-Dry</option>
                                    <option value="Sweet">Sweet</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="product-alcohol">Alcohol %</label>
                                <input type="number" id="product-alcohol" name="alcohol" step="0.1" placeholder="e.g., 13.5">
                            </div>
                            <div class="form-group">
                                <label for="product-volume">Volume</label>
                                <select id="product-volume" name="volume">
                                    <option value="0.375L">0.375L</option>
                                    <option value="0.75L">0.75L</option>
                                    <option value="1.5L">1.5L</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="product-category">Category</label>
                                <select id="product-category" name="category" required>
                                    <!-- Options will be loaded dynamically -->
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="product-image">Image URL</label>
                                <input type="text" id="product-image" name="imageUrl" required>
                            </div>
                            <div class="form-group">
                                <label for="product-description">Description (supports paragraphs)</label>
                                <textarea id="product-description" name="description"></textarea>
                            </div>
                            <div class="form-group">
                                <label for="product-price">Price</label>
                                <input type="number" id="product-price" name="price" step="0.01" required>
                            </div>
                            <div class="form-group">
                                <label for="product-old-price">Old Price (optional)</label>
                                <input type="number" id="product-old-price" name="oldPrice" step="0.01">
                            </div>
                             <div class="form-group">
                                <label for="product-badge">Badge (e.g., Exclusive, New)</label>
                                <input type="text" id="product-badge" name="badge">
                            </div>
                            <div class="form-group">
                                <label for="product-stock-status">Stock Status</label>
                                <select id="product-stock-status" name="stockStatus">
                                    <option value="In Stock">In Stock</option>
                                    <option value="Low Stock">Low Stock</option>
                                    <option value="Out of Stock">Out of Stock</option>
                                </select>
                            </div>

                            <h4>Wine Details</h4>
                            <div class="form-group">
                                <label for="product-tasting-notes">Tasting Notes</label>
                                <textarea id="product-tasting-notes" name="tastingNotes" placeholder="Aroma: ...&#10;Taste: ...&#10;Color: ..."></textarea>
                            </div>
                             <div class="form-group">
                                <label for="product-food-pairing">Food Pairing</label>
                                <textarea id="product-food-pairing" name="foodPairing"></textarea>
                            </div>
                             <div class="form-group">
                                <label for="product-serving">Serving Recommendations</label>
                                <textarea id="product-serving" name="serving" placeholder="Serving Temperature: 16-18°C&#10;Decanting: Recommended for 1 hour"></textarea>
                            </div>

                            <hr style="margin: 30px 0; border-color: var(--border-color);">
                            <h4>SEO & Schema Markup</h4>
                            <div class="form-group">
                                <label for="product-meta-title">Meta Title</label>
                                <input type="text" id="product-meta-title" name="metaTitle">
                            </div>
                            <div class="form-group">
                                <label for="product-meta-description">Meta Description</label>
                                <textarea id="product-meta-description" name="metaDescription"></textarea>
                            </div>
                            <div class="form-group">
                                <label for="product-sku">SKU (Артикул)</label>
                                <input type="text" id="product-sku" name="sku">
                            </div>
                            <div class="form-group">
                                <label for="product-brand">Producer / Winery</label>
                                <input type="text" id="product-brand" name="brand">
                            </div>
                            <div class="form-group">
                                <label for="product-gtin">GTIN (Barcode, EAN/UPC)</label>
                                <input type="text" id="product-gtin" name="gtin">
                            </div>
                            <div class="form-group">
                                <label for="product-rating-value">Average Rating (from 1 to 5)</label>
                                <input type="number" id="product-rating-value" name="ratingValue" step="0.1" min="1" max="5">
                            </div>
                            <div class="form-group">
                                <label for="product-review-count">Number of Reviews</label>
                                <input type="number" id="product-review-count" name="reviewCount" step="1" min="0">
                            </div>
                            
                            <button type="submit" class="btn-save">Save Product</button>
                        </form>
                        <hr style="margin: 20px 0; border-color: var(--border-color);">
                    </div>
                    <table class="admin-table">
                        <thead>
                            <tr>
                                <th>Image</th>
                                <th>Name</th>
                                <th>Price</th>
                                <th>Status</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="products-table-body">
                            <!-- Product rows will be inserted here -->
                        </tbody>
                    </table>
                </div>
            </main>
        </div>
    </div>

    <script type="module">
    // ===============================================================
    // =================== FIREBASE INITIALIZATION ===================
    // ===============================================================
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.15.0/firebase-app.js";
    import { getFirestore, collection, getDocs, doc, getDoc, query, where, addDoc, updateDoc, deleteDoc } from "https://www.gstatic.com/firebasejs/9.15.0/firebase-firestore.js";

    const firebaseConfig = {
      apiKey: "AIzaSyBflzOWVf3HgDpdUhha3qvyeUJf7i6dOuk",
      authDomain: "wine-91d0e.firebaseapp.com",
      projectId: "wine-91d0e",
      storageBucket: "wine-91d0e.firebasestorage.app",
      messagingSenderId: "1021620433427",
      appId: "1:1021620433427:web:5439252fb350c4455a85e6",
      measurementId: "G-TRWHY3KXK1"
    };

    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    // ===============================================================
    // =================== MAIN PAGE SCRIPT ==========================
    // ===============================================================
    
    document.addEventListener('DOMContentLoaded', () => {

        // ===============================================================
        // =================== DATA FETCHING FUNCTIONS ===================
        // ===============================================================
        async function fetchHeroData() {
            const heroDocRef = doc(db, "siteContent", "hero");
            const docSnap = await getDoc(heroDocRef);
            return docSnap.exists() ? docSnap.data() : null;
        }

        async function fetchCategories() {
            const q = query(collection(db, "categories"));
            const querySnapshot = await getDocs(q);
            return querySnapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));
        }

        async function fetchProducts() {
            const q = query(collection(db, "products"));
            const querySnapshot = await getDocs(q);
            return querySnapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));
        }

        // ===============================================================
        // =================== RENDER FUNCTIONS ==========================
        // ===============================================================
        function updateMetaTags(title, description) {
            if (title) {
                document.title = title;
            }
            let metaDesc = document.querySelector('meta[name="description"]');
            if (!metaDesc) {
                metaDesc = document.createElement('meta');
                metaDesc.setAttribute('name', 'description');
                document.head.appendChild(metaDesc);
            }
            if (description) {
                metaDesc.setAttribute('content', description);
            }
        }

        function renderHero(heroData) {
            if (!heroData) return;
            document.querySelector('#hero-section .hero-subtitle').textContent = heroData.heroSubtitle;
            document.querySelector('#hero-section .hero-title').textContent = heroData.heroTitle;
            document.querySelector('#hero-section .hero-description').textContent = heroData.heroDescription;
            document.querySelector('#hero-section .hero-bg').style.backgroundImage = `linear-gradient(rgba(0, 0, 0, 0.6), rgba(0, 0, 0, 0.6)), url('${heroData.heroBgImage}')`;
            updateMetaTags(heroData.metaTitle, heroData.metaDescription);
        }

        // MODIFIED: Renders categories with the new card design
        function renderCategories(categories) {
            const grid = document.querySelector('#categories-section .categories-grid');
            grid.innerHTML = '';
            categories.filter(c => !c.isArchived).forEach(cat => {
                const categoryUrl = `/catalog.html?category=${cat.slug}`;
                grid.innerHTML += `
                    <a href="${categoryUrl}" class="category-card">
                        <div class="category-image">
                            <img src="${cat.imageUrl}" alt="${cat.name}">
                        </div>
                        <div class="category-info">
                            <h3 class="category-name">${cat.name}</h3>
                            <div class="category-count">${cat.productCount} items</div>
                        </div>
                    </a>
                `;
            });
        }

        // MODIFIED: Renders products with the new rich subtitle and meta description
        function renderProducts(products) {
            const grid = document.querySelector('#products-section .products-grid');
            grid.innerHTML = '';
            products.filter(p => !p.isArchived).slice(0, 4).forEach(prod => {
                if (!prod.slug || !prod.category) {
                    console.warn(`Product "${prod.name}" is missing 'slug' or 'category' field.`);
                    return;
                }
                const categorySlug = prod.category.toLowerCase().replace(/\s+/g, '-');
                const productUrl = `/catalog/${categorySlug}/${prod.slug}`;

                // Build the rich subtitle
                let subtitle = '';
                const mainInfo = [prod.category, prod.sweetness].filter(Boolean).join(' ');
                const originInfo = [prod.region, prod.country].filter(Boolean).join(', ');
                if (mainInfo) subtitle += mainInfo;
                if (originInfo) subtitle += (subtitle ? ' from ' : '') + originInfo;

                // Use meta description or fallback to regular description
                const descriptionText = prod.metaDescription || prod.description || '';

                grid.innerHTML += `
                    <div class="product-card">
                        <div class="product-image">
                            <img src="${prod.imageUrl}" alt="${prod.name}">
                            ${prod.badge ? `<div class="product-badge">${prod.badge}</div>` : ''}
                        </div>
                        <div class="product-info">
                            <div class="product-subtitle">${subtitle}</div>
                            <h3 class="product-name">${prod.name}</h3>
                            <p class="product-description">${descriptionText}</p>
                            <div class="product-price">
                                <div>
                                    <div class="price">$${prod.price.toFixed(2)}</div>
                                    ${prod.oldPrice ? `<div class="old-price">$${prod.oldPrice.toFixed(2)}</div>` : ''}
                                </div>
                            </div>
                            <a href="${productUrl}" class="view-details-btn"><i class="fas fa-eye"></i> View Details</a>
                        </div>
                    </div>
                `;
            });
        }

        function renderAll(data) {
            renderHero(data.hero);
            renderCategories(data.categories);
            renderProducts(data.products);
        }

        // ===============================================================
        // =================== ADMIN PANEL LOGIC =========================
        // ===============================================================
        function initializeAdminPanel(initialData) {
            let localData = JSON.parse(JSON.stringify(initialData));

            const mainSiteContent = document.getElementById('main-site-content');
            const adminPanel = document.getElementById('admin-panel');
            const footer = document.getElementById('footer');
            let clickCount = 0;
            let clickTimer = null;

            footer.addEventListener('click', () => {
                clickCount++;
                if (clickCount === 1) {
                    clickTimer = setTimeout(() => { clickCount = 0; }, 400);
                } else if (clickCount === 2) {
                    clearTimeout(clickTimer);
                    clickCount = 0;
                    enterAdminMode();
                }
            });

            function enterAdminMode() {
                mainSiteContent.style.display = 'none';
                adminPanel.style.display = 'block';
                loadAdminDashboard();
            }

            document.getElementById('exit-admin-mode').addEventListener('click', (e) => {
                e.preventDefault();
                mainSiteContent.style.display = 'block';
                adminPanel.style.display = 'none';
            });

            const adminMenuLinks = document.querySelectorAll('.admin-menu a');
            const adminViews = document.querySelectorAll('.admin-view');

            adminMenuLinks.forEach(link => {
                link.addEventListener('click', e => {
                    e.preventDefault();
                    if (link.id === 'exit-admin-mode') return;
                    const viewId = `admin-view-${link.dataset.view}`;
                    adminMenuLinks.forEach(l => l.classList.remove('active'));
                    link.classList.add('active');
                    adminViews.forEach(view => view.classList.remove('active'));
                    document.getElementById(viewId).classList.add('active');
                    switch (link.dataset.view) {
                        case 'hero': loadHeroAdmin(); break;
                        case 'categories': loadCategoriesAdmin(); break;
                        case 'products': loadProductsAdmin(); break;
                    }
                });
            });

            function loadAdminDashboard() {
                document.querySelector('.admin-menu a[data-view="dashboard"]').click();
            }

            // --- Slug generation helper ---
            function generateSlug(text) {
                return text.toString().toLowerCase()
                    .replace(/\s+/g, '-')       // Replace spaces with -
                    .replace(/[^\w\-]+/g, '')   // Remove all non-word chars
                    .replace(/\-\-+/g, '-')     // Replace multiple - with single -
                    .replace(/^-+/, '')         // Trim - from start of text
                    .replace(/-+$/, '');        // Trim - from end of text
            }

            // --- Hero Section Management ---
            const heroForm = document.getElementById('hero-form');
            function loadHeroAdmin() {
                heroForm.heroSubtitle.value = localData.hero.heroSubtitle || '';
                heroForm.heroTitle.value = localData.hero.heroTitle || '';
                heroForm.heroDescription.value = localData.hero.heroDescription || '';
                heroForm.heroBgImage.value = localData.hero.heroBgImage || '';
                heroForm.metaTitle.value = localData.hero.metaTitle || '';
                heroForm.metaDescription.value = localData.hero.metaDescription || '';
            }
            heroForm.addEventListener('submit', async (e) => {
                e.preventDefault();
                const updatedData = {
                    heroSubtitle: heroForm.heroSubtitle.value,
                    heroTitle: heroForm.heroTitle.value,
                    heroDescription: heroForm.heroDescription.value,
                    heroBgImage: heroForm.heroBgImage.value,
                    metaTitle: heroForm.metaTitle.value,
                    metaDescription: heroForm.metaDescription.value,
                };
                try {
                    await updateDoc(doc(db, "siteContent", "hero"), updatedData);
                    localData.hero = updatedData;
                    renderHero(localData.hero);
                    alert('Hero section updated!');
                } catch (error) {
                    console.error("Error updating hero section: ", error);
                    alert('Error updating hero section.');
                }
            });

            // --- Category Management ---
            const categoryFormContainer = document.getElementById('category-form-container');
            const categoryForm = document.getElementById('category-form');
            const categoriesTableBody = document.getElementById('categories-table-body');
            const categoryNameInput = document.getElementById('category-name');
            const categorySlugInput = document.getElementById('category-slug');

            categoryNameInput.addEventListener('input', () => {
                categorySlugInput.value = generateSlug(categoryNameInput.value);
            });

            document.getElementById('btn-add-category').addEventListener('click', () => {
                categoryForm.reset();
                categoryForm['category-id'].value = '';
                categoryFormContainer.style.display = 'block';
            });

            function loadCategoriesAdmin() {
                categoriesTableBody.innerHTML = '';
                localData.categories.forEach(cat => {
                    const row = document.createElement('tr');
                    if (cat.isArchived) row.classList.add('archived-item');
                    row.innerHTML = `
                        <td data-label="Image"><img src="${cat.imageUrl}" alt="${cat.name}"></td>
                        <td data-label="Name">${cat.name}</td>
                        <td data-label="Slug">${cat.slug || 'N/A'}</td>
                        <td data-label="Status">${cat.isArchived ? 'Archived' : 'Active'}</td>
                        <td data-label="Actions" class="actions-cell">
                            <button class="btn-edit" data-id="${cat.id}"><i class="fas fa-edit"></i></button>
                            <button class="${cat.isArchived ? 'btn-restore' : 'btn-archive'}" data-id="${cat.id}"><i class="fas ${cat.isArchived ? 'fa-undo' : 'fa-archive'}"></i></button>
                            <button class="btn-delete" data-id="${cat.id}"><i class="fas fa-trash"></i></button>
                        </td>
                    `;
                    categoriesTableBody.appendChild(row);
                });
            }

            categoryForm.addEventListener('submit', async (e) => {
                e.preventDefault();
                const id = categoryForm['category-id'].value;
                const formData = {
                    name: categoryForm['category-name'].value,
                    slug: categoryForm['category-slug'].value,
                    imageUrl: categoryForm['category-image'].value,
                    productCount: parseInt(categoryForm['category-product-count'].value)
                };

                try {
                    if (id) {
                        await updateDoc(doc(db, "categories", id), formData);
                        const index = localData.categories.findIndex(c => c.id === id);
                        localData.categories[index] = { ...localData.categories[index], ...formData };
                    } else {
                        const docRef = await addDoc(collection(db, "categories"), { ...formData, isArchived: false });
                        localData.categories.push({ id: docRef.id, ...formData, isArchived: false });
                    }
                    categoryForm.reset();
                    categoryFormContainer.style.display = 'none';
                    renderAll(localData);
                    loadCategoriesAdmin();
                    alert('Category saved!');
                } catch (error) {
                    console.error("Error saving category: ", error);
                    alert('Error saving category.');
                }
            });

            categoriesTableBody.addEventListener('click', async (e) => {
                const target = e.target.closest('button');
                if (!target) return;
                const id = target.dataset.id;
                const category = localData.categories.find(c => c.id === id);

                if (target.classList.contains('btn-edit')) {
                    categoryForm['category-id'].value = category.id;
                    categoryForm['category-name'].value = category.name;
                    categoryForm['category-slug'].value = category.slug || '';
                    categoryForm['category-image'].value = category.imageUrl;
                    categoryForm['category-product-count'].value = category.productCount;
                    categoryFormContainer.style.display = 'block';
                    window.scrollTo(0, categoryFormContainer.offsetTop);
                } else if (target.classList.contains('btn-archive') || target.classList.contains('btn-restore')) {
                    const newStatus = !category.isArchived;
                    await updateDoc(doc(db, "categories", id), { isArchived: newStatus });
                    category.isArchived = newStatus;
                    renderAll(localData);
                    loadCategoriesAdmin();
                } else if (target.classList.contains('btn-delete')) {
                    if (confirm('Are you sure you want to permanently delete this category?')) {
                        await deleteDoc(doc(db, "categories", id));
                        localData.categories = localData.categories.filter(c => c.id !== id);
                        renderAll(localData);
                        loadCategoriesAdmin();
                    }
                }
            });

            // --- Product Management ---
            const productFormContainer = document.getElementById('product-form-container');
            const productForm = document.getElementById('product-form');
            const productsTableBody = document.getElementById('products-table-body');
            const productCategorySelect = document.getElementById('product-category');
            const productNameInput = document.getElementById('product-name');
            const productSlugInput = document.getElementById('product-slug');

            productNameInput.addEventListener('input', () => {
                productSlugInput.value = generateSlug(productNameInput.value);
            });

            function populateCategorySelect() {
                productCategorySelect.innerHTML = localData.categories
                    .filter(c => !c.isArchived)
                    .map(c => `<option value="${c.name}">${c.name}</option>`).join('');
            }

            document.getElementById('btn-add-product').addEventListener('click', () => {
                productForm.reset();
                productForm['product-id'].value = '';
                populateCategorySelect();
                productFormContainer.style.display = 'block';
            });

            function loadProductsAdmin() {
                productsTableBody.innerHTML = '';
                localData.products.forEach(prod => {
                    const row = document.createElement('tr');
                    if (prod.isArchived) row.classList.add('archived-item');
                    row.innerHTML = `
                        <td data-label="Image"><img src="${prod.imageUrl}" alt="${prod.name}"></td>
                        <td data-label="Name">${prod.name}</td>
                        <td data-label="Price">$${prod.price.toFixed(2)}</td>
                        <td data-label="Status">${prod.isArchived ? 'Archived' : 'Active'}</td>
                        <td data-label="Actions" class="actions-cell">
                            <button class="btn-edit" data-id="${prod.id}"><i class="fas fa-edit"></i></button>
                            <button class="${prod.isArchived ? 'btn-restore' : 'btn-archive'}" data-id="${prod.id}"><i class="fas ${prod.isArchived ? 'fa-undo' : 'fa-archive'}"></i></button>
                            <button class="btn-delete" data-id="${prod.id}"><i class="fas fa-trash"></i></button>
                        </td>
                    `;
                    productsTableBody.appendChild(row);
                });
            }

            productForm.addEventListener('submit', async (e) => {
                e.preventDefault();
                const id = productForm['product-id'].value;
                const formData = {
                    name: productForm.name.value,
                    slug: productForm.slug.value,
                    region: productForm.region.value,
                    country: productForm.country.value,
                    appellation: productForm.appellation.value,
                    year: parseInt(productForm.year.value) || null,
                    grapeVarieties: productForm.grapeVarieties.value,
                    sweetness: productForm.sweetness.value,
                    alcohol: parseFloat(productForm.alcohol.value) || null,
                    volume: productForm.volume.value,
                    category: productForm.category.value,
                    imageUrl: productForm.imageUrl.value,
                    description: productForm.description.value,
                    price: parseFloat(productForm.price.value),
                    oldPrice: parseFloat(productForm.oldPrice.value) || null,
                    badge: productForm.badge.value,
                    stockStatus: productForm.stockStatus.value,
                    tastingNotes: productForm.tastingNotes.value,
                    foodPairing: productForm.foodPairing.value,
                    serving: productForm.serving.value,
                    metaTitle: productForm.metaTitle.value,
                    metaDescription: productForm.metaDescription.value,
                    sku: productForm.sku.value,
                    brand: productForm.brand.value,
                    gtin: productForm.gtin.value,
                    ratingValue: parseFloat(productForm.ratingValue.value) || null,
                    reviewCount: parseInt(productForm.reviewCount.value) || null,
                };

                try {
                    if (id) {
                        await updateDoc(doc(db, "products", id), formData);
                        const index = localData.products.findIndex(p => p.id === id);
                        localData.products[index] = { ...localData.products[index], ...formData };
                    } else {
                        const docRef = await addDoc(collection(db, "products"), { ...formData, isArchived: false });
                        localData.products.push({ id: docRef.id, ...formData, isArchived: false });
                    }
                    productForm.reset();
                    productFormContainer.style.display = 'none';
                    renderAll(localData);
                    loadProductsAdmin();
                    alert('Product saved!');
                } catch (error) {
                    console.error("Error saving product: ", error);
                    alert('Error saving product.');
                }
            });

            productsTableBody.addEventListener('click', async (e) => {
                const target = e.target.closest('button');
                if (!target) return;
                const id = target.dataset.id;
                const product = localData.products.find(p => p.id === id);

                if (target.classList.contains('btn-edit')) {
                    populateCategorySelect();
                    productForm['product-id'].value = product.id;
                    productForm.name.value = product.name || '';
                    productForm.slug.value = product.slug || '';
                    productForm.region.value = product.region || '';
                    productForm.country.value = product.country || '';
                    productForm.appellation.value = product.appellation || '';
                    productForm.year.value = product.year || '';
                    productForm.grapeVarieties.value = product.grapeVarieties || '';
                    productForm.sweetness.value = product.sweetness || 'Dry';
                    productForm.alcohol.value = product.alcohol || '';
                    productForm.volume.value = product.volume || '0.75L';
                    productForm.category.value = product.category || '';
                    productForm.imageUrl.value = product.imageUrl || '';
                    productForm.description.value = product.description || '';
                    productForm.price.value = product.price || '';
                    productForm.oldPrice.value = product.oldPrice || '';
                    productForm.badge.value = product.badge || '';
                    productForm.stockStatus.value = product.stockStatus || 'In Stock';
                    productForm.tastingNotes.value = product.tastingNotes || '';
                    productForm.foodPairing.value = product.foodPairing || '';
                    productForm.serving.value = product.serving || '';
                    productForm.metaTitle.value = product.metaTitle || '';
                    productForm.metaDescription.value = product.metaDescription || '';
                    productForm.sku.value = product.sku || '';
                    productForm.brand.value = product.brand || '';
                    productForm.gtin.value = product.gtin || '';
                    productForm.ratingValue.value = product.ratingValue || '';
                    productForm.reviewCount.value = product.reviewCount || '';
                    
                    productFormContainer.style.display = 'block';
                    window.scrollTo(0, productFormContainer.offsetTop);
                } else if (target.classList.contains('btn-archive') || target.classList.contains('btn-restore')) {
                    const newStatus = !product.isArchived;
                    await updateDoc(doc(db, "products", id), { isArchived: newStatus });
                    product.isArchived = newStatus;
                    renderAll(localData);
                    loadProductsAdmin();
                } else if (target.classList.contains('btn-delete')) {
                    if (confirm('Are you sure you want to permanently delete this category?')) {
                        await deleteDoc(doc(db, "products", id));
                        localData.products = localData.products.filter(p => p.id !== id);
                        renderAll(localData);
                        loadProductsAdmin();
                    }
                }
            });
        }

        // ===============================================================
        // =================== PAGE INITIALIZATION =======================
        // ===============================================================
        async function main() {
            try {
                // Mobile Menu Toggle
                const mobileMenuBtn = document.querySelector('.mobile-menu-btn');
                const navLinks = document.getElementById('main-nav');
                mobileMenuBtn.addEventListener('click', () => {
                    navLinks.classList.toggle('active');
                });

                const [hero, categories, products] = await Promise.all([
                    fetchHeroData(),
                    fetchCategories(),
                    fetchProducts()
                ]);

                const siteData = { hero, categories, products };
                
                renderAll(siteData);
                initializeAdminPanel(siteData);

            } catch (error) {
                console.error("Error initializing page: ", error);
                document.body.innerHTML = `<div style="padding: 40px; text-align: center;"><h1>Error loading page data.</h1><p>${error.message}</p></div>`;
            }
        }

        main();
    });
    </script>
</body>
</html>