<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Firebase Connection Test</title>
</head>
<body>
    <h1>Firebase Connection Test</h1>
    <p>Check the developer console (F12) for messages.</p>
    <div id="status">Connecting...</div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.15.0/firebase-app.js";
        import { getFirestore, collection, getDocs } from "https://www.gstatic.com/firebasejs/9.15.0/firebase-firestore.js";

        // ВАЖНО: Скопируйте этот объект 1-в-1 из вашего catalog.html
        const firebaseConfig = {
          apiKey: "AIzaSyBflzOWVf3HgDpdUhha3qvyeUJf7i6dOuk",
          authDomain: "wine-91d0e.firebaseapp.com",
          projectId: "wine-91d0e",
          storageBucket: "wine-91d0e.firebasestorage.app",
          messagingSenderId: "1021620433427",
          appId: "1:1021620433427:web:5439252fb350c4455a85e6",
          measurementId: "G-TRWHY3KXK1"
        };

        const statusDiv = document.getElementById('status');

        try {
            console.log("Initializing Firebase...");
            const app = initializeApp(firebaseConfig);
            const db = getFirestore(app);
            console.log("Firebase Initialized. Trying to get data...");
            
            // Пытаемся получить всю коллекцию БЕЗ фильтров
            const querySnapshot = await getDocs(collection(db, "products"));
            
            console.log("Successfully fetched data!");
            statusDiv.textContent = `SUCCESS! Found ${querySnapshot.size} products.`;
            statusDiv.style.color = 'green';

        } catch (error) {
            console.error("CRITICAL ERROR: ", error);
            statusDiv.textContent = `FAILED! See console for error details. Message: ${error.message}`;
            statusDiv.style.color = 'red';
        }
    </script>
</body>
</html>